# ğŸ”§ åç«¯ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜

## ğŸ“‹ ä¸¤ç§é…ç½®æ–¹å¼

### æ–¹å¼ 1: ä½¿ç”¨ `online-ppt-backend/.env`ï¼ˆæœ¬åœ°å¼€å‘ï¼‰

**é€‚ç”¨åœºæ™¯ï¼š** æœ¬åœ°å¼€å‘ï¼Œä¸ä½¿ç”¨ Docker

**ä½ç½®ï¼š** `online-ppt-backend/.env`

**å·¥ä½œåŸç†ï¼š**
- åç«¯ä»£ç ä½¿ç”¨ `dotenv.config()` è¯»å– `.env` æ–‡ä»¶
- `dotenv.config()` ä¼šåœ¨å½“å‰å·¥ä½œç›®å½•æŸ¥æ‰¾ `.env` æ–‡ä»¶
- æœ¬åœ°è¿è¡Œæ—¶ï¼Œä» `online-ppt-backend/.env` è¯»å–

**é…ç½®æ­¥éª¤ï¼š**
```bash
cd online-ppt-backend
cp .env.example .env
nano .env  # å¡«å…¥ API å¯†é’¥
npm start  # æœ¬åœ°è¿è¡Œ
```

---

### æ–¹å¼ 2: ä½¿ç”¨æ ¹ç›®å½• `.env`ï¼ˆDocker éƒ¨ç½²ï¼‰â­ æ¨è

**é€‚ç”¨åœºæ™¯ï¼š** Docker éƒ¨ç½²

**ä½ç½®ï¼š** é¡¹ç›®æ ¹ç›®å½• `/resoft-ai-ppt/.env`

**å·¥ä½œåŸç†ï¼š**
1. Docker Compose ä»æ ¹ç›®å½•çš„ `.env` è¯»å–ç¯å¢ƒå˜é‡
2. é€šè¿‡ `docker-compose.yml` çš„ `environment:` ä¼ é€’ç»™å®¹å™¨
3. å®¹å™¨å†…çš„ `dotenv.config()` ä¼šè¯»å–ç¯å¢ƒå˜é‡ï¼ˆä¼˜å…ˆçº§é«˜äºæ–‡ä»¶ï¼‰

**é…ç½®æ­¥éª¤ï¼š**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /Users/tanghuan/Desktop/resoft-ai-ppté¡¹ç›®/resoft-ai-ppt
cp .env.example .env
nano .env  # å¡«å…¥ API å¯†é’¥
docker-compose up -d
```

---

## ğŸ” ä¸ºä»€ä¹ˆ Docker ä¸ä½¿ç”¨ `online-ppt-backend/.env`ï¼Ÿ

æŸ¥çœ‹ `.dockerignore` æ–‡ä»¶ï¼š

```dockerignore
.env          # â† è¿™é‡Œæ’é™¤äº† .env æ–‡ä»¶
.env.local
.env.*.local
```

**åŸå› ï¼š**
1. **å®‰å…¨è€ƒè™‘**ï¼š`.env` æ–‡ä»¶åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼ˆAPI å¯†é’¥ï¼‰ï¼Œä¸åº”è¯¥è¢«æ‰“åŒ…åˆ°é•œåƒä¸­
2. **çµæ´»æ€§**ï¼šé€šè¿‡ Docker Compose çš„ç¯å¢ƒå˜é‡ä¼ é€’æ›´çµæ´»
3. **æœ€ä½³å®è·µ**ï¼šç¯å¢ƒå˜é‡åº”è¯¥é€šè¿‡å®¹å™¨è¿è¡Œæ—¶ä¼ é€’ï¼Œè€Œä¸æ˜¯æ‰“åŒ…åœ¨é•œåƒä¸­

---

## ğŸ“Š ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§

åœ¨ Docker å®¹å™¨ä¸­ï¼Œç¯å¢ƒå˜é‡çš„ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

1. **docker-compose.yml çš„ `environment:`**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
   ```yaml
   environment:
     - OPENAI_API_KEY=${OPENAI_API_KEY:-}
   ```
   ä»æ ¹ç›®å½• `.env` è¯»å–å¹¶ä¼ é€’

2. **å®¹å™¨å†…çš„ `.env` æ–‡ä»¶**ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
   ```javascript
   dotenv.config()  // è¯»å–å®¹å™¨å†…çš„ .env
   ```

3. **ç³»ç»Ÿç¯å¢ƒå˜é‡**

4. **ä»£ç ä¸­çš„é»˜è®¤å€¼**

---

## âœ… æ¨èé…ç½®æ–¹å¼

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

**ä½¿ç”¨æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ï¼š**

```bash
# 1. åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º .env
cd /Users/tanghuan/Desktop/resoft-ai-ppté¡¹ç›®/resoft-ai-ppt
cp .env.example .env

# 2. ç¼–è¾‘é…ç½®
nano .env

# 3. å¯åŠ¨ Docker æœåŠ¡
docker-compose up -d
```

**ä¼˜ç‚¹ï¼š**
- âœ… ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æœåŠ¡çš„ç¯å¢ƒå˜é‡
- âœ… ç¬¦åˆ Docker æœ€ä½³å®è·µ
- âœ… æ›´å®‰å…¨ï¼ˆä¸æ‰“åŒ…åˆ°é•œåƒä¸­ï¼‰
- âœ… ä¾¿äº CI/CD é…ç½®

### æœ¬åœ°å¼€å‘

**ä½¿ç”¨ `online-ppt-backend/.env` æ–‡ä»¶ï¼š**

```bash
# 1. åœ¨åç«¯ç›®å½•åˆ›å»º .env
cd online-ppt-backend
cp .env.example .env

# 2. ç¼–è¾‘é…ç½®
nano .env

# 3. æœ¬åœ°è¿è¡Œ
npm start
```

**ä¼˜ç‚¹ï¼š**
- âœ… ç‹¬ç«‹é…ç½®ï¼Œä¸å½±å“ Docker
- âœ… é€‚åˆæœ¬åœ°å¼€å‘è°ƒè¯•

---

## ğŸ”„ ä¸¤ç§æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | æ ¹ç›®å½• `.env` (Docker) | `online-ppt-backend/.env` (æœ¬åœ°) |
|------|----------------------|--------------------------------|
| **ä½ç½®** | `/resoft-ai-ppt/.env` | `/resoft-ai-ppt/online-ppt-backend/.env` |
| **ç”¨é€”** | Docker Compose éƒ¨ç½² | æœ¬åœ°å¼€å‘ |
| **ä¼ é€’æ–¹å¼** | docker-compose.yml â†’ å®¹å™¨ | dotenv.config() ç›´æ¥è¯»å– |
| **æ˜¯å¦æ‰“åŒ…åˆ°é•œåƒ** | âŒ ä¸æ‰“åŒ… | âŒ è¢« .dockerignore æ’é™¤ |
| **æ¨èåœºæ™¯** | ç”Ÿäº§éƒ¨ç½² | æœ¬åœ°å¼€å‘ |

---

## ğŸ“ é…ç½®ç¤ºä¾‹

### æ ¹ç›®å½• `.env`ï¼ˆDocker ä½¿ç”¨ï¼‰

```bash
# /resoft-ai-ppt/.env
OPENAI_API_KEY=sk-your-key-here
ZHIPU_API_KEY=your-zhipu-key
PORT=5001
```

### åç«¯ç›®å½• `.env`ï¼ˆæœ¬åœ°å¼€å‘ä½¿ç”¨ï¼‰

```bash
# /resoft-ai-ppt/online-ppt-backend/.env
OPENAI_API_KEY=sk-your-key-here
ZHIPU_API_KEY=your-zhipu-key
PORT=5001
```

**æ³¨æ„ï¼š** ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹å¯ä»¥ç›¸åŒï¼Œä½†ç”¨é€”ä¸åŒã€‚

---

## ğŸ¯ æ€»ç»“

### Docker éƒ¨ç½²æ—¶

1. âœ… **ä½¿ç”¨æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶**
2. âœ… é€šè¿‡ `docker-compose.yml` ä¼ é€’ç¯å¢ƒå˜é‡
3. âœ… `.dockerignore` ä¼šæ’é™¤ `online-ppt-backend/.env`ï¼Œä¸ä¼šæ‰“åŒ…åˆ°é•œåƒ

### æœ¬åœ°å¼€å‘æ—¶

1. âœ… **ä½¿ç”¨ `online-ppt-backend/.env` æ–‡ä»¶**
2. âœ… `dotenv.config()` ä¼šè‡ªåŠ¨è¯»å–
3. âœ… ä¸å½±å“ Docker éƒ¨ç½²

### æœ€ä½³å®è·µ

- **Docker éƒ¨ç½²**ï¼šç»Ÿä¸€ä½¿ç”¨æ ¹ç›®å½•çš„ `.env`
- **æœ¬åœ°å¼€å‘**ï¼šä½¿ç”¨ `online-ppt-backend/.env`
- **ä¸è¦**ï¼šå°†çœŸå®çš„ API å¯†é’¥æäº¤åˆ° Git

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆ Docker ä¸è¯»å– `online-ppt-backend/.env`ï¼Ÿ

**A:** å› ä¸º `.dockerignore` æ’é™¤äº† `.env` æ–‡ä»¶ï¼Œè¿™æ˜¯å®‰å…¨æœ€ä½³å®è·µã€‚ç¯å¢ƒå˜é‡åº”è¯¥é€šè¿‡ Docker Compose ä¼ é€’ï¼Œè€Œä¸æ˜¯æ‰“åŒ…åœ¨é•œåƒä¸­ã€‚

### Q: å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ª `.env` æ–‡ä»¶å—ï¼Ÿ

**A:** å¯ä»¥ï¼Œä½†ç”¨é€”ä¸åŒï¼š
- æ ¹ç›®å½• `.env` â†’ Docker éƒ¨ç½²
- `online-ppt-backend/.env` â†’ æœ¬åœ°å¼€å‘

### Q: å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å­˜åœ¨ï¼ŒDocker ä¼šä½¿ç”¨å“ªä¸ªï¼Ÿ

**A:** Docker ä¼šä½¿ç”¨æ ¹ç›®å½•çš„ `.env`ï¼Œå› ä¸ºï¼š
1. `online-ppt-backend/.env` è¢« `.dockerignore` æ’é™¤ï¼Œä¸ä¼šå¤åˆ¶åˆ°é•œåƒ
2. `docker-compose.yml` ä»æ ¹ç›®å½• `.env` è¯»å–å¹¶ä¼ é€’ç»™å®¹å™¨

### Q: æœ¬åœ°å¼€å‘æ—¶ï¼Œæ ¹ç›®å½•çš„ `.env` ä¼šå½±å“åç«¯å—ï¼Ÿ

**A:** ä¸ä¼šã€‚æœ¬åœ°å¼€å‘æ—¶ï¼Œåç«¯ä»£ç åœ¨ `online-ppt-backend/` ç›®å½•è¿è¡Œï¼Œ`dotenv.config()` åªä¼šåœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ `.env` æ–‡ä»¶ã€‚


